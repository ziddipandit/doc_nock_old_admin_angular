<div class="chat_details_box" *ngIf="isValidChatId">
    <div class="chat_desc">
        <div class="tab-content" id="v-pills-tabContent">
            <div class="tab-pane fade show active">
                <div class="title_box">
                    <h4 class="profile_title">
                        <span *ngIf="recieverDetails && recieverDetails.isGroupChat">
                            <img class="img-fluid" [src]="getDummyImage('group')" alt="">
                        </span>
                        <span *ngIf="recieverDetails">
                            <img class="img-fluid" *ngIf="!recieverDetails.image || recieverDetails.image == 'null'"
                                [src]="recieverUserImage" alt="">
                        </span>
                        <span *ngIf="recieverDetails">
                            {{ recieverDetails.chatName }}
                        </span>
                    </h4>
                    <div class="profile_filter_icon">
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.539 20.528">
                                <g id="Group_934" data-name="Group 934" transform="translate(-173.891 -186.75)">
                                    <path id="Path_2766" data-name="Path 2766"
                                        d="M189.452,201.5c.273.261.552.521.822.79q1.809,1.8,3.609,3.614a1.1,1.1,0,0,1,.276.479.484.484,0,0,1-.267.55.552.552,0,0,1-.641-.037,2.27,2.27,0,0,1-.24-.222q-2.076-2.074-4.151-4.152a2,2,0,0,1-.182-.253,8.653,8.653,0,0,1-7.156,2.084,8.4,8.4,0,0,1-5.477-3.2,8.74,8.74,0,1,1,13.408.343Zm1-5.779A7.571,7.571,0,1,0,182.9,203.3,7.559,7.559,0,0,0,190.454,195.725Z"
                                        transform="translate(0 0)" fill="#64bd05" stroke="#64bd05" stroke-width="0.5" />
                                </g>
                            </svg>
                        </a>
                        <a href="#">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.403 21.476">
                                <g id="Group_900" data-name="Group 900" transform="translate(0.25 0.273)">
                                    <path id="Path_2750" data-name="Path 2750"
                                        d="M541.382,888.344c-.294-.048-.589-.089-.881-.144a12.625,12.625,0,0,1-3.24-1.149,20.948,20.948,0,0,1-4.687-3.1,21.543,21.543,0,0,1-6.336-9.051,7.8,7.8,0,0,1-.476-2.762,3.367,3.367,0,0,1,.966-2.379c.574-.582,1.13-1.187,1.745-1.722a2,2,0,0,1,2.976.045c.966.913,1.9,1.862,2.805,2.831a1.9,1.9,0,0,1,.014,2.681c-.51.566-1.064,1.093-1.608,1.628a.226.226,0,0,0-.054.312,12.067,12.067,0,0,0,2.174,3,14.954,14.954,0,0,0,2.881,2.433c.281.179.584.321.871.491a.189.189,0,0,0,.276-.04c.453-.462.912-.918,1.372-1.375a2.349,2.349,0,0,1,1.272-.727,1.962,1.962,0,0,1,1.77.591c.889.874,1.769,1.758,2.648,2.641a2.032,2.032,0,0,1,.148,3.036c-.606.7-1.276,1.343-1.948,1.979a2.963,2.963,0,0,1-1.734.75.923.923,0,0,0-.136.038Zm-14.56-16.12a8.216,8.216,0,0,0,.6,2.828,20.157,20.157,0,0,0,4.229,6.546,20.668,20.668,0,0,0,6.089,4.513,10.712,10.712,0,0,0,3.617,1.153,2.5,2.5,0,0,0,2.115-.577c.6-.579,1.188-1.182,1.754-1.8a.97.97,0,0,0-.023-1.488q-1.363-1.4-2.762-2.759a.917.917,0,0,0-1.279-.049,2.84,2.84,0,0,0-.272.248c-.507.5-1.011,1.013-1.52,1.516a.863.863,0,0,1-1.1.175c-.3-.15-.594-.3-.881-.475a15.9,15.9,0,0,1-3.575-2.994,12.351,12.351,0,0,1-2.222-3.187.964.964,0,0,1,.262-1.359c.529-.511,1.059-1.023,1.562-1.559a.916.916,0,0,0-.01-1.4c-.667-.7-1.357-1.38-2.04-2.065-.25-.251-.5-.5-.764-.739a.953.953,0,0,0-1.318-.031,3.087,3.087,0,0,0-.244.217c-.473.471-.94.949-1.418,1.415A2.457,2.457,0,0,0,526.822,872.224Z"
                                        transform="translate(-525.76 -867.39)" fill="#64bd05" stroke="#64bd05"
                                        stroke-width="0.5" />
                                </g>
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="content_box">
                    <div class="row">
                        <div class="looping-div-messages" *ngFor="let message of allMessages">
                            <div class="col-md-12" *ngIf="message.sender._id != loggedInUserId">
                                <div class="sender_box">
                                    <div class="imgBox">
                                        <img [src]="recieverUserImage" alt="">
                                    </div>
                                    <div class="text_box">
                                        <h6>{{ formatDate(message.createdAt) }}</h6>
                                        <div class="text_inner_box arrow-left">
                                            <p>
                                                {{ message.content }}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            <div class="col-md-12" *ngIf="message.sender._id === loggedInUserId">
                                <div class="reciever_box">
                                    <div class="text_box">
                                        <h6>{{ formatDate(message.createdAt) }}</h6>
                                        <div class="text_inner_box arrow-left">
                                            <p>
                                                {{ message.content }}
                                            </p>
                                        </div>
                                    </div>
    
                                    <div class="imgBox">
                                        <img [src]="imageURL"
                                            class="img-fluid" alt="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="write_message_box">
                    <div class="write_inner_box">
                        <div class="form-group">
                            <div class="input_box">
                                <input type="text" class="form-control" (keyup.enter)="sendMessage()" [(ngModel)]="message" name="message" autocomplete="off" placeholder="Write a message">
                                <div class="input_btn_box">
                                    <a class="cursor" class="warning_btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5.708 23.172">
                                            <g id="Group_932" data-name="Group 932"
                                                transform="translate(-657.802 177.881)">
                                                <path id="Path_2777" data-name="Path 2777"
                                                    d="M657.813-174.774a2.879,2.879,0,0,1,2.492-3.08,2.836,2.836,0,0,1,3.128,2.19,4.937,4.937,0,0,1,.039,1.508c-.226,2.87-.47,5.738-.716,8.607-.135,1.571-.26,3.145-.438,4.711a1.622,1.622,0,0,1-1.639,1.4,1.626,1.626,0,0,1-1.671-1.4c-.157-1.326-.25-2.661-.365-3.992q-.282-3.276-.557-6.553C657.992-172.517,657.9-173.646,657.813-174.774Z"
                                                    fill="#656565" />
                                                <path id="Path_2778" data-name="Path 2778"
                                                    d="M662.146-129.442a1.855,1.855,0,0,1,1.864,1.85,1.884,1.884,0,0,1-1.884,1.846,1.885,1.885,0,0,1-1.846-1.847A1.855,1.855,0,0,1,662.146-129.442Z"
                                                    transform="translate(-1.481 -28.963)" fill="#656565" />
                                            </g>
                                        </svg>
                                    </a>

                                    <a class="cursor">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22.852 25.88">
                                            <path id="Icon_ionic-ios-attach" data-name="Icon ionic-ios-attach"
                                                d="M21.011,8.923a.807.807,0,0,0-.806.806V19.779a4.169,4.169,0,0,1-1.137,2.848A4.091,4.091,0,0,1,16.2,23.852h-.7a4.018,4.018,0,0,1-2.833-1.272,4.15,4.15,0,0,1-1.235-2.853V6.763a2.809,2.809,0,0,1,.894-2.042,3.076,3.076,0,0,1,2.119-.843,2.877,2.877,0,0,1,2.905,2.884V18.869a1.634,1.634,0,0,1-1.5,1.664,1.589,1.589,0,0,1-1.458-1.664V11.963a.806.806,0,1,0-1.613,0v6.906A3.1,3.1,0,0,0,18.055,21.2a3.265,3.265,0,0,0,.9-2.326V6.763A4.518,4.518,0,0,0,14.426,2.25a4.536,4.536,0,0,0-3.215,1.318,4.46,4.46,0,0,0-1.339,3.2V19.732a5.777,5.777,0,0,0,1.685,4.032,5.587,5.587,0,0,0,3.934,1.649h.7a5.646,5.646,0,0,0,3.923-1.659,5.807,5.807,0,0,0,1.235-1.789,5.412,5.412,0,0,0,.46-2.176V9.73A.8.8,0,0,0,21.011,8.923Z"
                                                transform="translate(6.027 -7.386) rotate(34)" fill="#656565" />
                                        </svg>
                                    </a>

                                    <a class="cursor" class="voice_btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.78 23.94">
                                            <g id="Icon_feather-mic" data-name="Icon feather-mic"
                                                transform="translate(0.75 0.75)">
                                                <path id="Path_2773" data-name="Path 2773"
                                                    d="M16.56,1.5A3.06,3.06,0,0,0,13.5,4.56v8.16a3.06,3.06,0,0,0,6.12,0V4.56A3.06,3.06,0,0,0,16.56,1.5Z"
                                                    transform="translate(-9.42 -1.5)" fill="none" stroke="#656565"
                                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" />
                                                <path id="Path_2774" data-name="Path 2774"
                                                    d="M21.78,15v2.04a7.14,7.14,0,1,1-14.28,0V15"
                                                    transform="translate(-7.5 -5.82)" fill="none" stroke="#656565"
                                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" />
                                                <path id="Path_2775" data-name="Path 2775" d="M18,28.5v4.08"
                                                    transform="translate(-10.86 -10.14)" fill="none" stroke="#656565"
                                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" />
                                                <path id="Path_2776" data-name="Path 2776" d="M12,34.5h8.16"
                                                    transform="translate(-8.94 -12.06)" fill="none" stroke="#656565"
                                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" />
                                            </g>
                                        </svg>
                                    </a>

                                    <a class="cursor" (click)="sendMessage()" class="send_mess_btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21.276 21.276">
                                            <g id="Icon_feather-send" data-name="Icon feather-send"
                                                transform="translate(0.75 1.061)">
                                                <path id="Path_2771" data-name="Path 2771" d="M27.206,3,16.5,13.706"
                                                    transform="translate(-7.741 -3)" fill="none" stroke="#fff"
                                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" />
                                                <path id="Path_2772" data-name="Path 2772"
                                                    d="M22.465,3,15.652,22.465l-3.893-8.759L3,9.813Z"
                                                    transform="translate(-3 -3)" fill="none" stroke="#fff"
                                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" />
                                            </g>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>